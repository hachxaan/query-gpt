[Unit]
Description=Backoffice Beta
Requires=network.target
After=network.target
After=syslog.target

[Service]
TimeoutStartSec=0
RestartSec=7
Restart=always
User=administrador
KillSignal=SIGTERM
Type=notify
NotifyAccess=all

# Cambiar la salida estándar a 'journal+console' para mostrar logs en tiempo real
StandardOutput=journal+console
StandardError=journal+console

# Desactivar el buffering de la salida
Environment=PYTHONUNBUFFERED=1

WorkingDirectory=/home/administrador/microservices/microservice-backoffice
Environment="PATH=/home/administrador/microservices/microservice-backoffice/venv/bin"
Environment="DJANGO_SETTINGS_MODULE=backoffice.settings"

# Modificar la línea ExecStart para incluir opciones de uWSGI que desactiven el buffering
ExecStart=/home/administrador/microservices/microservice-backoffice/venv/bin/uwsgi --ini backoffice-beta.ini --log-master --log-5xx --disable-logging --immediate-uid-reload

[Install]
WantedBy=multi-user.target